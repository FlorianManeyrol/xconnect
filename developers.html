<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>X connect</title>
    <link rel="icon" href="assets/logos/favicon.png" type="image/png" sizes="16x16">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="X connect">
    <meta name="keywords" content="X connect">
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" media="all" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Oswald:100,300,400,500" rel="stylesheet" type="text/css">
    <link href="assets/css/style.css" rel="stylesheet" type="text/css" media="all" />
</head>

<body>
    <div class="container">
        <nav class="navbar navbar-default navbar-fixed-top affix" role="navigation" data-spy="affix" data-offset-top="70">
            <div class="container">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header page-scroll">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                      <span class="sr-only">Toggle navigation</span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand page-scroll" href="index">
                        <!-- <img src="assets/logos/logo.png" height="35" width="35" alt="Mu" /> -->
                        Xconnect
                    </a>
                </div>
                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse navbar-right" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li><a class="page-scroll" href="index">Home</a></li>
                        <li><a class="page-scroll" href="demo">Demo</a></li>
                        <li><a class="page-scroll" href="developers">Developers</a></li>
                        <li><a class="page-scroll" href="dorum">Forum</a></li>
                        <li><a class="page-scroll" href="blog">Blog</a></li>
                        <li><a class="page-scroll" href="faq">FAQ</a></li>
                        <li><a href="contact">Contact</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- /.navbar-collapse -->
    </div>
    <div class="main" id="main">
        <div class="intro">
        </div>
    </div>
    <div class="demo-description">
      <div class="container">
        <h2> Developpers </h2>
      </div>
    </div>
    <div class="container bs-docs-container">
      <div class="row">
        <div class="col-md-9" role="main">
          <div class="bs-docs-section">
            <h1 class="page-header" id="baseconcepts">Base Concepts</h1>
            <h2>The OpenID Connect protocol</h2>
            <h3>INTRODUCTION</h3>
            <p>The OpenID Connect protocol is at the heart of the interworking between Service Providers and X Connect. It is an overlay to the OAuth 2.0 protocol that makes it possible for Clients (Service Providers) to verify users identity by the means of an authorization server (called Identity Provider) implemented on the XConnect Gateway.</p>
            <p>The Service Providers (SP) have to be OpenID Connect Clients and are also called Relying Parties.</p>
            <p>The OIDC protocl specification lies here  http://openid.net/connect/. Herafter, we guide you trough the configuration of your OpenID Connect enabled application in order for your users to be able authenticate by XConnect. We also help you integrate the required fonctions into your application.</p>

            <h3>STANDARD FLOWS</h3>




            <p>The OpenID Connect protocol defines 3 REST calls done by the client (you as a Service Provider) and 4 endpoints, one on the client side and 3 on the Identity Provider side.</p>


            <p>Beforehand, the client application would subscribe (manually) to the Identity Provider. Doing so, it indicates a callback URL (the URL to which the user will be redirected once authenticated). This URL is also called "callback endpoint". In return to the subscription, the Identity Provider gives the client a client ID and <<<  sec></sec>ret></secret> <  <cl></cl>ass></class>=""></secret></  p>

            <p>Whenever the user clicks on the XConnect authentication button at client side, the flow is as follows;  </p>

            <p>The client makes a redirection to the "authorization endpoint"at the Identity Provider with its client ID and callback URL among other parameters. The Identity Provider then redirects the user to the authentication page of the authentication service. If the user is able to correctly identifies theirself, the ID Provider sends back an authorization code to the clie  nt.</p>
            <p>The client then makes a Web service call to the "token endpoint" of the ID provider with the authorization code it has received, and authenticates that request with its client ID and secret. The provider returns an access token (a base64 encoded string), an ID token (taking the form of a JSON Web token see  https://developer.atlassian.com/static/connect/docs/concepts/understanding-jwt.html) and somtimes a refresh token (a base64 encoded st  ring)</p>
            <p>The client makes a Web service call to the "userInfo endpoint" of the ID Provider with the received access token and the ID Gateway sends back the user information to the client.</p>

            <h3>IN THE CASE OF X CONNECT</h3>

            <p>The XCOnnect Gateway serves as an ID Provider and the flows between the Client and the Gateway are standard OpenID Connect flows.</p>
            <h2>The Pivotal Identity</h2>
            <p>The pivotal identity is part of the user data provided through the ID Gateway to Service Providers by relying on Authentication Providers (the user would rely on thier credentials at this Authentication Provider to log-in at the Client Aplication). The pivotal identity  helps fully identify the user.</p>
            <table class="bordered box-shadow">
              <thead>
                <tr>
                  <th colspan="3"><b>X Connect Personnal User</b></th>
                </tr>
                <tr>
                  <th><b>Fields</b></th>
                  <th><b>Type</b></th>
                  <th><b>Description</b></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>given_name</td>
                  <td>string</td>
                  <td>the given name (OpenIDConnect standard)</td>
                </tr>
                <tr>
                  <td>family_name</td>
                  <td>string</td>
                  <td>the family name of birth (OpenIDConnect standard)</td>

                </tr>
                <tr>
                  <td>birthdate</td>
                  <td>string</td>
                  <td>the date of birth uner the following format YYYY-MM-DD (OpenIDConnect standard)</td>

                </tr>
                <tr>
                  <td>gender</td>
                  <td>string</td>
                  <td>male for men, female for women (OpenIDConnect standard)</td>

                </tr>
                <tr>
                  <td>birthplace</td>
                  <td>string</td>
                  <td>the birth place code (or a null string if birthplace is abroad)</td>

                </tr>
                <tr>
                  <td>birthcountry</td>
                  <td>string</td>
                  <td>the birth country code </td>
                </tr>
              </tbody>
            </table>
            <table class="bordered box-shadow">
              <thead>
                <tr>
                  <th colspan="3"><b>X Connect Business User</b></th>
                </tr>
                <tr>
                  <th><b>Fields</b></th>
                  <th><b>Type</b></th>
                  <th><b>Description</b></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>given_name</td>
                  <td>string</td>
                  <td>the given name (OpenIDConnect standard)</td>
                </tr>
                <tr>
                  <td>family_name</td>
                  <td>string</td>
                  <td>the family name of birth (OpenIDConnect standard)</td>

                </tr>
                <tr>
                  <td>email</td>
                  <td>string</td>
                  <td>user email address</td>

                </tr>
                <tr>
                  <td>EntID</td>
                  <td>string</td>
                  <td>the company TIN number</td>

                </tr>
              </tbody>
            </table>

          </div>
          <div class="bs-docs-section">
            <h1 class="page-header" id="identify">I want to identify/authenticate users via X Connect</h1>
            <ul>
              <li>Subscribe via this form : we will send you a client ID and client secret </li>
              <li>Get an Openid Connect client
                <ul>
                  <li>we provide you with example client application that interwork with X Connect: https://github.com/xconect/service-providers-examples</li>
                  <li>other clients are available here http://openid.net/developers/libraries/. You need to choose an implementation which has "Relying Party" set at "yes". You may have to modify your client for it to be fullly compatible with the flow exhange detailed here?</li>
                </ul>
              </li>
              <li>You will also have to configure our endpoint in your OpenID Connect application, your callback URL and your client ID and client secret</li>
              <li>Insert on the authentication page of your application an X Connect button that points to your URL that triggers the first step of the OpenIDConnect kinematic. You can find some graphical resources here</li>
            </ul>
            <h3>OUR ENDPOINTS</h3>
            <p>In X Connect Production envionment, these endpoints are avaiable using HTTPS. However, during the pilot phase we provide HTTP (non securre) endpoints. Make sure you do not connect your life applicaiton.</p>
            <table class="bordered box-shadow">
              <thead>
                <tr>
                  <th colspan="2"><b>X Connect Personal User</b></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><b>Authorization</b></td>
                  <td>http://xconnect.herokuapp/authorize</td>
                </tr>
                <tr>
                  <td><b>Token</b></td>
                  <td>http://xconnect.herokuapp/token</td>

                </tr>
                <tr>
                  <td><b>UserInfo</b></td>
                  <td>http://xconnect.herokuapp/userinfo</td>

                </tr>
                <tr>
                  <td>Logout</td>
                  <td>http://xconnect.herokuapp/logout</td>
                </tr>
              </tbody>
            </table>
            <table class="bordered box-shadow">
              <thead>
                <tr>
                  <th colspan="2"><b>X Connect Personal User</b></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><b>Authorization</b></td>
                  <td>http://xconnect-ent.herokuapp/authorize</td>
                </tr>
                <tr>
                  <td><b>Token</b></td>
                  <td>http://xconnect-ent.herokuapp/token</td>

                </tr>
                <tr>
                  <td><b>UserInfo</b></td>
                  <td>http://xconnect-ent.herokuapp/userinfo</td>

                </tr>
                <tr>
                  <td>Logout</td>
                  <td>http://xconnect-ent.herokuapp/logout</td>
                </tr>
              </tbody>
            </table>
            <h3>DETAILS OF HOW IT WORKS</h3>
            <p>Schéma to come</p>
            <p>The retrieval of the pivotal identity should be done as an immediate follow-up to the precedent calls (authentication and code retrieval). it is not possible as of the implementation today to call this Web service at a different time.</p>
            <h3>FLOW DETAILS</h3>
            <p>In the remainder of the page, "XC_URL" will refer to either "http://xconnect.herokuapp" or http://xconnect-ent.herokuapp</p>
            <div class="box-shadow">
              <p><b><XC_URL>/authorize [Redirection]</b></p>
              <hr>
              <p><b>DESCRIPTION</b></p>
              <p><b>Context: </b>The SP (Service Provider) redirects from the precedent request to /authorize in order to engage into the authentication phase</p>
              <br>
              <p><b>Origin: </b> Service Provider</p>
              <p><b>Target:</b> XConnect Gateway</p>
              <p><b>Call type:</b> navigator redirect </p>
              <p>Note: it is possible to add aditionnal parameters along with the redirect_uri, to be passed after the ? under the following format " key=value". They will be sent back as such at return to the SP.</p>
              <p><b>Example</b></p>
              <p>if you redirect to the following URL http://xconnect.herokuapp/authorize?response_type=[...]&client_id=[...]&redirect_uri=https%3A%2F%2Ffs.fr%2Foidc_callback%3Ftestkey%3Dtestvalue&state=[...]&nonce=[...]&scope=[...]</p>
              <p>XC will redirect to the SP at following URL: https://fs.fr/oidc_callback?testkey=testvalue&[...]</p>
              <p>This helps keeping state whenever the starting and arivial web site do not share thier Web sessions.</p>
              <p><b>REQUEST</b></p>
              <p>URL: </p>
              <pre><XC_URL>/authorize?response_type=code&client_id=<CLIENT_ID>&redirect_uri=<FS_URL>%2F<URL_CALLBACK>&scope=<SCOPES>&state=<STATE>&nonce=<NONCE></pre>
              <p>Méthod : GET</p>
              <p>RESPONSE</p>
              <p>/</p>


            </div>


DESCRIPTION

Context: The SP (Service Provider) redirects from the precedent request to /authorize in order to engage into the authentication phase

Origin : Service Provider
Target : XConnect Gateway
Call type : navigator redirect

Note: it is possible to add aditionnal parameters along with the redirect_uri, to be passed after the ? under the following format " key=value". They will be sent back as such at return to the SP.

Example:

if you redirect to the following URL http://xconnect.herokuapp/authorize?response_type=[...]&client_id=[...]&redirect_uri=https%3A%2F%2Ffs.fr%2Foidc_callback%3Ftestkey%3Dtestvalue&state=[...]&nonce=[...]&scope=[...]

XC will redirect to the SP at following URL: https://fs.fr/oidc_callback?testkey=testvalue&[...]

This helps keeping state whenever the starting and arivial web site do not share thier Web sessions.

REQUEST

URL:

<XC_URL>/authorize?response_type=code&client_id=<CLIENT_ID>&redirect_uri=<FS_URL>%2F<URL_CALLBACK>&scope=<SCOPES>&state=<STATE>&nonce=<NONCE>
Méthod : GET

RESPONSE

/

          </div>

        </div>
        <div class="col-md-3" role="complementary">
          <nav class="bs-docs-sidebar hidden-print hidden-sm hidden-xs affix" data-spy="affix" data-offset-top="250">
            <ul class="nav bs-docs-sidenav">
              <li class="">
                <a href="#baseconcepts">Base Concepts</a>
              </li>
              <li class="">
                <a href="#identify">Identify/authenticate users</a>
              </li>
            </ul>
          </nav>

        </div>

      </div>
    </div>


    <!-- Footer Section -->
    <div class="footer">
      <div class="container">
        <div class="col-md-12 text-center">
          <ul class="footer-menu">
            <li><a href="#">Home</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Terms</a></li>
            <li><a href="#">Privacy</a></li>
          </ul>
        <div class="footer-text">
          <p>
            Copyright © 2016 XConnect All Rights Reserved.
          </p>
        </div>
      </div>
    </div>
</body>
<!-- Jquery and Js Plugins -->
<script type="text/javascript" src="assets/js/jquery-2.1.1.js"></script>
<script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
<script type="text/javascript" src="assets/js/custom.js"></script>

</html>
